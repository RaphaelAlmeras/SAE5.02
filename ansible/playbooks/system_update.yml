---
- name: Simulation de mise à jour système
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Afficher le système ciblé
      command: uname -a
      register: sysinfo

    - name: Afficher la version de l'OS
      command: cat /etc/os-release
      register: osrelease
      ignore_errors: true

    - name: Simuler une mise à jour APT
      command: apt-get -s upgrade
      register: upgrade_simulation
      ignore_errors: true

    - name: Résumé
      debug:
        msg:
          - "Système analysé"
          - "{{ sysinfo.stdout | default('N/A') }}"
          - "{{ osrelease.stdout | default('OS non détecté') }}"
          - "Simulation APT exécutée (aucune modification réelle)"

